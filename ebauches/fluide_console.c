//Â http://www.ioccc.org/2012/endoh1/endoh1.c
#  include<stdio.h>
#  include <unistd.h>
#  include<complex.h>
#  define              h for(                     x=011;              201-1>x              ++;)b[                     x]
#  define              f(p,e)                                         for(p=a;              e,p<r;                                        p+=5)
#  define              z(e,i)                                        f(p,p[i]=e)f(q,w=cabs  (d=*p-  *q)/2-     1)if(0  <(x=1-      w))p[i]+=w*

static double _Complex a [97687];
static double _Complex *p;
static double _Complex *q;
static double _Complex *r = a;
static double _Complex w=0;
static double _Complex d;
static int x;
static int y;
static char b[6856]="\x1b[2J"  "\x1b"  "[1;1H     ";
static char *o = b;
static char *t;

int main()
{
	for(; 0 < (x = getc(stdin));) {

		if (x > 10) {
			if (32 < x) {
				*r++ = w;
				4[r] = w + 1;
				*r = r[5] = x == 35;
				r += 9;
				w = *r;
			}
			else {
				w = w - I;
			}
		}
		else {
			x = w + 2;
			w = x;
		}
	}

	for (;;puts(o), o = b + 4) {
		z(p[1]*9,2)              w;z(G,  3)(d*(     3-p[2]  -q[2])  *P+p[4      ]*V-q[4]              *V)/p[  2];
		for (x = 011; 201 - 1 > x++;) {
			b[x] = 0;
		}

		f(p, (  t=b+10  +(x=*p      *I)+80*(              y=*p/2  ),*p+=p    [4]+=p  [3]/10  *!p[1])     )x=0 <=x              &&x<79   &&0<=y&&y<23?1[1  [*t|=8   ,t]|=4,t+=80]=1, *t              |=2:0;

		for (x = 011; 201 - 1 > x++;) {
			b[x] = " '`-.|//,\\|\\_\\/\x23\n"[(x % 80 - 9) ? x[b] : 16];
		}

		usleep(12321);
	}

	return 0;
}
