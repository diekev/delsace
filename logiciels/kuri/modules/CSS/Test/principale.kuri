importe Chaine
importe CSS
importe Ensemble
importe Fondation
importe SysFichier

principale :: fonc () -> z32
{
    contenu := contenu_fichier_texte("/home/kevin/defaults.css")
    diffère déloge(contenu)

    lexèmes := lèxe_style(contenu)
    imprime("% lexèmes\n", lexèmes.taille)

    // pour lexèmes {
    //     imprime("%\n", it)

    //     si index_it >= 89 {
    //         arrête
    //     }
    // }

    stylesheet := parse_a_stylesheet(lexèmes)

    imprime("% règle(s)\n", stylesheet.value.taille)

    propriétés: [..]ChaineUTF16

    pour stylesheet.value {
        si it.type == ParsedQualifiedRule {
            selectors := parse_selector_list(it.prelude)

            saufsi selectors.possède_valeur() {
                continue
            }

            imprime("% {\n", selectors.Quelque)

            content := parse_a_style_block_s_contents(it.bloc.value)

            pour decl dans content.decls {
                imprime("    %\n", decl.name)
                ensemble_ajoute(*propriétés, decl.name)
            }
            imprime("}\n")

            // pour lexème dans it.prelude {
            //     imprime("%\n", lexème)
            // }
        }
    }

    imprime("\nPropriétés :\n")
    pour propriétés {
        imprime("-- %\n", it)
    }

    // pour stylesheet.value {
    //     imprime("-- valeurs pour règle : prélude % | bloc %\n", it.prelude.taille, it.bloc.value.taille)
    // }

    retourne 0
}
