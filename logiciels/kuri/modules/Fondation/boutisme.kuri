// Bibliothèque de travail sur le boutisme des nombres binaires.

#enligne commute_boutisme :: fonc(dyn val : *n16) -> rien
{
    dyn v := mémoire(val)
    v = (v >> 8) | (v << 8)
    mémoire(val) = v
}

#enligne commute_boutisme :: fonc(dyn val : *n32) -> rien
{
    dyn v := mémoire(val)

    v = (v >> 24) |
        ((v << 8) & transtype(0x00FF0000 : n32)) |
        ((v >> 8) & transtype(0x0000FF00 : n32)) |
        (v << 24);

    mémoire(val) = v
}

#enligne commute_boutisme :: fonc(dyn val : *n64) -> rien
{
    dyn v := mémoire(val)

    v = (v >> 56) |
        ((v << 40) & transtype(0x00FF000000000000 : n64)) |
        ((v << 24) & transtype(0x0000FF0000000000 : n64)) |
        ((v << 8) & transtype(0x000000FF00000000 : n64)) |
        ((v >> 8) & transtype(0x00000000FF000000 : n64)) |
        ((v >> 24) & transtype(0x0000000000FF0000 : n64)) |
        ((v >> 40) & transtype(0x000000000000FF00 : n64)) |
        (v << 56);

    mémoire(val) = v
}

#enligne commute_boutisme :: fonc(dyn val : *z16) -> rien
{
    commute_boutisme(transtype(val: *n16))
}

#enligne commute_boutisme :: fonc(dyn val : *z32) -> rien
{
    commute_boutisme(transtype(val: *n32))
}

#enligne commute_boutisme :: fonc(dyn val : *z64) -> rien
{
    commute_boutisme(transtype(val: *n64))
}

#enligne commute_boutisme :: fonc(dyn val : *r32) -> rien
{
    commute_boutisme(transtype(val: *n32))
}

#enligne commute_boutisme :: fonc(dyn val : *r64) -> rien
{
    commute_boutisme(transtype(val: *n64))
}

commute_boutisme :: fonc(dyn tabl : []$T) -> rien
{
    pour val dans tabl {
        commute_boutisme(@val)
    }
}

petit_boutisme :: fonc () -> bool
{
    UN := 1
    retourne mémoire(transtype(@UN: *z8)) == '\1'
}

grand_boutisme :: fonc () -> bool
{
    retourne !petit_boutisme()
}
