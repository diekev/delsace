/* Structures de données pour réprésenter des menus et des barres de menu pour
 * des applications. */

/* ------------------------------------------------------------------------- */
/** \nom Barre de menu.
 * \{ */

BarreDeMenu :: struct {
    menus: []*Menu
}

crée_barre_de_menu :: fonc () -> *BarreDeMenu
{
    résultat := loge(BarreDeMenu)

    tableau_ajoute(*résultat.menus, crée_menu("Fichier", ["Nouveau", "Ouvrir", "Sauvegarder", "Sauvegarder sous...", "Fermer"]))
    tableau_ajoute(*résultat.menus, crée_menu("Édition", ["Refaire", "Défaire"]))
    tableau_ajoute(*résultat.menus, crée_menu("Sélection", ["Tout déselectionner"]))
    tableau_ajoute(*résultat.menus, crée_menu("Affichage", ["Rechercher"]))
    tableau_ajoute(*résultat.menus, crée_menu("Aide", ["À Propos", "Manuel"]))

    retourne résultat
}

/** } */

/* ------------------------------------------------------------------------- */
/** \nom Menu
 * \{ */

/* À FAIRE :
 * - icones
 * - raccouricis clavier
 * - séparateur
 * - sous-menu
 */
Menu :: struct {
    Élément :: struct {
        texte: chaine
        bouton: *Bouton
    }

    texte: chaine
    éléments: []Élément
}

importe Fondation

crée_menu :: fonc (texte: chaine, éléments: []chaine) -> *Menu
{
    résultat := loge(Menu)
    résultat.texte = texte

    sur_clique_bouton :: fonc (b: *Bouton)
    {
        imprime("Clique bouton : %\n", b.texte)
    }

    pour éléments {
        résultat.ajoute_élément(crée_bouton(it, sur_clique_bouton))
    }

    retourne résultat
}

ajoute_élément :: fonc (menu: *Menu, bouton: *Bouton)
{
    tableau_ajoute(*menu.éléments, Menu.Élément(bouton.texte, bouton))
}

/** } */
